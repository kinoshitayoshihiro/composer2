[pytest]
testpaths =
    tests
    tools
norecursedirs = .git .hg .svn _build tmp* .venv アーカイブ .hypothesis
markers =
    ess_optional: tests that require the Essentia backend
    slow: tests that run >20 s
    ci_perf: performance gate
    stretch: stretch smoke tests
    data_ops: data operations tests
    gui: gui tests
    no_midi_port: skip tests when no MIDI input is available
    packaging: packaging checks
    docs: documentation build
    audio: tests requiring fluidsynth
    requires_audio: tests that need libsoundfile etc.
    fx: audio effects tests
    velocity: velocity expression tests
    hi_fi: tests for high-fidelity audio generation
    eval: evaluation tests
    plugin: plugin tests
    asyncio: mark tests to run with pytest-asyncio
    integration: optional integration tests

[tool:pytest]
addopts = -q --tb=short --disable-warnings
asyncio_mode = auto
filterwarnings =
    ignore::music21.exceptions21.Music21DeprecationWarning
    ignore::DeprecationWarning
    ignore::sklearn.exceptions.ConvergenceWarning
    ignore:hdbscan not installed; using Jaccard dedupe fallback:RuntimeWarning
    ignore:unknown aux.*:RuntimeWarning
    ignore:aux hash collision detected.*:RuntimeWarning
    ignore:SHA-1 collision.*:RuntimeWarning
    ignore::pydantic.deprecated.PydanticDeprecatedSince20
