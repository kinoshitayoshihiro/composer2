# sparkle_mapping.full.yaml
# Comprehensive mapping template for UJAM Virtual Guitarist SPARKLE 2 (Player Mode: Chord).
# Based on the UI layout where:
# - Common Phrases: C0..B1
# - Style Phrases:  C2..B2
# - Chord Input:    C3..C5  ("Play here")
# Notes use MIDI numbering where C0=12, C1=24, C2=36, C3=48, C4=60, C5=72.

# -----------------------------
# ACTIVE PRESET (pick one note)
# -----------------------------
# Choose which trigger area you want the script to fire.
# Option A: Common phrase (steady comp). Example uses C1 (24).
# Option B: Style phrase (depends on selected Style). Example uses C2 (36).
active_area: common   # one of: common, style

# For convenience we expose both. The script reads only `phrase_note`.
phrase_note: 24       # <- final selected trigger note; change to 36 to target Style phrase row

# -----------------------------
# PHRASE TRIGGER DEFINITIONS
# -----------------------------
# Typical ranges in SPARKLE 2 (verify per preset/style):
areas:
  common:
    # Common Phrases C0..B1 (12..35). Pick a lane/note you prefer for comping.
    # Below is a suggested mapping of useful anchors; adjust to taste.
    anchors:
      open_1_1:         12  # C0
      offbeat_2and4:    14  # D0
      long_chord_fill:  15  # D#0
      generic_sustain:  16  # E0
      generic_rhythm:   17  # F0
      chord_rhythm_1_16:18  # F#0
      open_1_4:         19  # G0
      open_1_8:         24  # C1  (DEFAULT suggestion for steady comp)
      half_mute_1_8:    25  # C#1
      muted_1_8:        26  # D1
      open_1_16_b:      27  # D#1
      muted_1_16:       28  # E1
      build_open_1_8:   29  # F1
      build_muted_1_8:  30  # F#1
      slide_down:       31  # G1   (red zone in UI)
      pick_slide:       32  # G#1  (purple zone in UI)
    special:
      silence:          12  # Often far-left key in Common row
  style:
    # Style Phrases C2..B2 (36..47). These vary strongly by Style.
    anchors:
      style_basic:      36  # C2
      style_variation1: 37  # C#2
      style_variation2: 38  # D2
      style_fill:       39  # D#2
      style_stop:       41  # F2 (some Styles use dedicated Stop; verify in UI)
    special:
      stop:             41  # If your Style uses a Stop key; adjust as needed

# -----------------------------
# CHORD INPUT / HARMONY
# -----------------------------
# SPARKLE reads chord definitions in the "Play Range" area (C3..C5).
# We still place explicit triads to be robust across voicings/presets.
chord_input_range:
  lo: 48   # C3
  hi: 84   # B5 (UI shows up to C5; leaving headroom is fine)

chord_octave: 4          # Center octave for triad placement (C4=60)
chord_velocity: 90
triad_intervals:
  maj: [0, 4, 7]
  min: [0, 3, 7]

# -----------------------------
# PHRASE NOTE GENERATION
# -----------------------------
phrase_velocity: 96
phrase_length_beats: 0.25   # Gate length for each pulse note
pulse_subdivision_default: "1/8"

# -----------------------------
# ADVANCED (optional)
# -----------------------------
# If you want to cycle through multiple phrase notes each bar, list them here.
# NOTE: The current converter uses only a single `phrase_note`. Cycling would
# require a tiny code changeâ€”happy to provide if needed.
cycle_phrase_notes: []  # e.g., [24, 26] to alternate open vs muted 1/8

# For inference fallback: if input MIDI lacks tempo, use this BPM.
fallback_bpm: 120


# -----------------------------
# KEY LAYOUT CHEAT SHEET (for Sparkle 2)
# -----------------------------
# MIDI note numbers (C4=60). Use this to confirm keyboard mapping.
#
# Common Phrases (row): C0..B1  => 12..35
# Style  Phrases (row): C2..B2  => 36..47
# Chord Input (Play Range): C3..C5 => 48..84
#
# --- Common Phrases C0..B1 (12..35) ---
# index  note  num
#   0    C0    12
#   1    C#0   13
#   2    D0    14
#   3    D#0   15
#   4    E0    16
#   5    F0    17
#   6    F#0   18
#   7    G0    19
#   8    G#0   20
#   9    A0    21
#  10    A#0   22
#  11    B0    23
#  12    C1    24
#  13    C#1   25
#  14    D1    26
#  15    D#1   27
#  16    E1    28
#  17    F1    29
#  18    F#1   30
#  19    G1    31
#  20    G#1   32
#  21    A1    33
#  22    A#1   34
#  23    B1    35
#
# Suggested anchors (adjust per Style):
#   silence: C0(12)
#   open_1_8: C1(24)
#   half_mute_1_8: C#1(25)
#   muted_1_8: D1(26)
#   open_1_16_b: D#1(27)
#   muted_1_16: E1(28)
#   build_open_1_8: F1(29)
#   build_muted_1_8: F#1(30)
#   slide_down: G1(31)
#   pick_slide: G#1(32)
# (Other keys are available for offbeat/stop/long-chord, depending on Style.)
#
# --- Style Phrases C2..B2 (36..47) ---
# index  note  num
#   0    C2    36
#   1    C#2   37
#   2    D2    38
#   3    D#2   39
#   4    E2    40
#   5    F2    41
#   6    F#2   42
#   7    G2    43
#   8    G#2   44
#   9    A2    45
#  10    A#2   46
#  11    B2    47
# Suggested anchors:
#   style_basic: C2(36)
#   style_variation1: C#2(37)
#   style_variation2: D2(38)
#   style_fill: D#2(39)
#   stop: F2(41)  # if used by the selected Style
#
# --- Chord Input (Play Range) C3..C5 (48..84) ---
# Full map for reference:
#   C3 48, C#3 49, D3 50, D#3 51, E3 52, F3 53, F#3 54, G3 55, G#3 56, A3 57, A#3 58, B3 59,
#   C4 60, C#4 61, D4 62, D#4 63, E4 64, F4 65, F#4 66, G4 67, G#4 68, A4 69, A#4 70, B4 71,
#   C5 72, C#5 73, D5 74, D#5 75, E5 76, F5 77, F#5 78, G5 79, G#5 80, A5 81, A#5 82, B5 83,
#   (C6 84)
# The converter places long triads within this range (centered around octave = 4).
#
# --- Style anchors enumeration in YAML (ensuring C2 start) ---
areas:
  style:
    anchors:
      style_c2_basic:      36  # C2
      style_cs2_var1:      37  # C#2
      style_d2_var2:       38  # D2
      style_ds2_fill:      39  # D#2
      style_e2_var:        40  # E2
      style_f2_stop:       41  # F2 (Stop if applicable)
      style_fs2_var:       42  # F#2
      style_g2_var:        43  # G2
      style_gs2_var:       44  # G#2
      style_a2_var:        45  # A2
      style_as2_var:       46  # A#2
      style_b2_var:        47  # B2
